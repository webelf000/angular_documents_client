<!-- TODO: New Version-->
<!--<mg-crud-->
  <!--[loadAction]="'LOAD_ALL_DOCUMENTS'"-->
  <!--[title]="'Documents'"-->
  <!--[tableOptions]="tableOptions"-->
  <!--[cardItemOptions]="cardItemOptions"-->
  <!--[selector]="selector"-->
  <!--[deleteAction]="'DELETE_DOCUMENT'"-->
  <!--[updateAction]="'UPDATE_DOCUMENT'"-->
  <!--[createAction]="'CREATE_DOCUMENT'"-->
  <!--[addButtonText]="'Upload Document'"-->
<!--&gt;-->
<!--</mg-crud>-->


<div>
  <h3>Documents
    <fj-button
      *ngIf="'DOCUMENTS.MAIN.UPLOAD_DOCUMENTS' | translate"
      (click)="openDocumentFormModal()"
      [shape]="'rounded'"
      [size]="'small'"
      [iconMargin]="'1px 5px'"
      [margin]="'0px 5px'"
      [iconPosition]="'before'"
      [icon]="'plus'"
    >{{addButtonText}}</fj-button>
  </h3>
</div>
<div class="pictures" *ngIf="documentsLoaded && pictureList && documentList;">
  <mg-spinner *ngIf="documentsLoaded && (!documentsLoaded | async); else showPictures"></mg-spinner>
  <ng-template #showPictures>
    <mg-ui-card *ngIf="showPicturesSection">
      <mg-ui-card-title>{{'DOCUMENTS.MAIN.PICTURES' | translate}}</mg-ui-card-title>
      <mg-ui-card-content>
        <mg-picture-list
            [pictureList]="pictureList | async"
            (docToPreview)="setPreviwedDoc($event)"
            (delete)="openDeleteConfirmModal($event)">
        </mg-picture-list>
      </mg-ui-card-content>
    </mg-ui-card>
    <mg-document-list
        *ngIf="showDocumentsSection"
        [documentList]="documentList | async"
        [projects] = "workflowLevel2List | async"
        (docToPreview)="setPreviwedDoc($event)"
        (delete)="openDeleteConfirmModal($event)">
      </mg-document-list>
    </ng-template>
</div>

<fj-modal #documentUploadModal [size]="'big'" [customStyles]="{padding: '0px'}">
  <div modal-content style="width: 100%">
    <mg-document-add
      [userSelectOptions]="coreUserList | async"
      [projectSelectOptions]="workflowLevel2List | async"
      [currentWorkflowLevel2]="currentWorkflowLevel2 | async"
      (documentAdded)= "closeModal()"
    >
    </mg-document-add>
  </div>
</fj-modal>

<fj-modal #documentPreviewModal [size]="'big'" [customStyles]="{padding: '0px'}">
  <div modal-content style="width: 100%">
    <mg-document-preview
      [userSelectOptions]="coreUserList | async"
      [projectSelectOptions]="workflowLevel2List | async"
      [currentWorkflowLevel2]="currentWorkflowLevel2 | async"
      [document]="currentDocument"
      (documentDelete)="openDeleteConfirmModal($event)"
      (documentEdit)="closeModal()"
    >
    </mg-document-preview>
  </div>
</fj-modal>
